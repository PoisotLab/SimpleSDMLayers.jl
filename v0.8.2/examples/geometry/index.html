<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Geometry for clipping · Simple SDM Layers</title><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.png" alt="Simple SDM Layers logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">Simple SDM Layers</a></span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Manual</span><ul><li><a class="tocitem" href="../../man/types/">Types</a></li><li><a class="tocitem" href="../../man/indexing/">Indexing</a></li><li><a class="tocitem" href="../../man/clip/">Clipping</a></li><li><a class="tocitem" href="../../man/changevalues/">Operations on values</a></li><li><a class="tocitem" href="../../man/overloads/">Overloads</a></li><li><a class="tocitem" href="../../man/operations/">Other operations</a></li><li><a class="tocitem" href="../../man/data/">Data access</a></li><li><a class="tocitem" href="../../man/io/">IO</a></li></ul></li><li><span class="tocitem">General examples</span><ul><li><a class="tocitem" href="../elevation/">Introduction: elevation data</a></li><li class="is-active"><a class="tocitem" href>Geometry for clipping</a></li><li><a class="tocitem" href="../slidingwindow/">Sliding window analysis</a></li><li><a class="tocitem" href="../landcover/">Landcover data</a></li><li><a class="tocitem" href="../multivariate/">Multivariate mapping</a></li></ul></li><li><span class="tocitem">SDM case studies</span><ul><li><a class="tocitem" href="../../sdm/gbif/">GBIF integration</a></li><li><a class="tocitem" href="../../sdm/vif/">Variable selection (VIF)</a></li><li><a class="tocitem" href="../../sdm/bioclim/">Building the BIOCLIM model</a></li><li><a class="tocitem" href="../../sdm/pseudoabsences/">Pseudo-absences</a></li><li><a class="tocitem" href="../../sdm/future/">Dealing with future data</a></li><li><a class="tocitem" href="../../sdm/brt/">BRTs and climate change</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">General examples</a></li><li class="is-active"><a href>Geometry for clipping</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Geometry for clipping</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/EcoJulia/SimpleSDMLayers.jl/docs/src/examples/geometry.jl" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Working-with-geometry-objects"><a class="docs-heading-anchor" href="#Working-with-geometry-objects">Working with geometry objects</a><a id="Working-with-geometry-objects-1"></a><a class="docs-heading-anchor-permalink" href="#Working-with-geometry-objects" title="Permalink"></a></h1><p>The <code>SimpleSDMLayers</code> package uses <code>Point</code>s to represent coordinates, which allows to easily use <code>GeometryBasics</code> objects for masking. In this example, we will illustrate how we can get the values around a given point, and within a polygon. These functions all rely on <code>mask</code> to extract the values.</p><pre><code class="language- hljs">using SimpleSDMLayers
using GeometryBasics
using Plots
using JSON

layer = SimpleSDMPredictor(WorldClim, BioClim; resolution=5.0, left=-89., right=-70., top=27., bottom=15.)</code></pre><p>Let&#39;s have a look at the data, before applying any transformation:</p><pre><code class="language- hljs">plot(layer)</code></pre><p>We will now define a center of 5 degree of radius centered on La Habana</p><pre><code class="language-julia hljs">la_habana = Point(-82.38304, 23.13302)
area = Circle(la_habana, 5.0)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">GeometryBasics.Circle{Float64}([-82.38304, 23.13302], 5.0)</code></pre><p>We can plot the background of the map, and add the clipped region:</p><pre><code class="language- hljs">plot(layer, c=:lightgrey, frame=:box)
plot!(mask(area, layer), c=:turku)
scatter!(la_habana, lab=&quot;&quot;, c=:white, msw=2.0)</code></pre><p>This approach is useful if you want to mask according to a polygon. In this case, we will keep the values within a polygon representing Cuba. We grab data from Natural Earth Resources, that do not have the best resolution in terms of borders, but are sufficient for this illustration:</p><pre><code class="language-julia hljs">borders = download(&quot;https://raw.githubusercontent.com/AshKyd/geojson-regions/master/countries/50m/CUB.geojson&quot;)
cuba_data = JSON.parsefile(borders)
polys = cuba_data[&quot;geometry&quot;][&quot;coordinates&quot;]
CUBA = SimpleSDMLayers._format_polygon.(polys)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">7-element Vector{Polygon{2, Float64, GeometryBasics.Point2{Float64}, GeometryBasics.LineString{2, Float64, GeometryBasics.Point2{Float64}, Base.ReinterpretArray{GeometryBasics.Line{2, Float64}, 1, Tuple{GeometryBasics.Point2{Float64}, GeometryBasics.Point2{Float64}}, GeometryBasics.TupleView{Tuple{GeometryBasics.Point2{Float64}, GeometryBasics.Point2{Float64}}, 2, 1, Vector{GeometryBasics.Point2{Float64}}}, false}}, Vector{GeometryBasics.LineString{2, Float64, GeometryBasics.Point2{Float64}, Base.ReinterpretArray{GeometryBasics.Line{2, Float64}, 1, Tuple{GeometryBasics.Point2{Float64}, GeometryBasics.Point2{Float64}}, GeometryBasics.TupleView{Tuple{GeometryBasics.Point2{Float64}, GeometryBasics.Point2{Float64}}, 2, 1, Vector{GeometryBasics.Point2{Float64}}}, false}}}}}:
 Polygon{2, Float64, GeometryBasics.Point2{Float64}, GeometryBasics.LineString{2, Float64, GeometryBasics.Point2{Float64}, Base.ReinterpretArray{GeometryBasics.Line{2, Float64}, 1, Tuple{GeometryBasics.Point2{Float64}, GeometryBasics.Point2{Float64}}, GeometryBasics.TupleView{Tuple{GeometryBasics.Point2{Float64}, GeometryBasics.Point2{Float64}}, 2, 1, Vector{GeometryBasics.Point2{Float64}}}, false}}, Vector{GeometryBasics.LineString{2, Float64, GeometryBasics.Point2{Float64}, Base.ReinterpretArray{GeometryBasics.Line{2, Float64}, 1, Tuple{GeometryBasics.Point2{Float64}, GeometryBasics.Point2{Float64}}, GeometryBasics.TupleView{Tuple{GeometryBasics.Point2{Float64}, GeometryBasics.Point2{Float64}}, 2, 1, Vector{GeometryBasics.Point2{Float64}}}, false}}}}(GeometryBasics.Line{2, Float64}[Line([-82.56176757812503, 21.571679687500023] =&gt; [-82.65483398437496, 21.518652343749977]), Line([-82.65483398437496, 21.518652343749977] =&gt; [-82.85317382812497, 21.443896484375017]), Line([-82.85317382812497, 21.443896484375017] =&gt; [-82.95961914062498, 21.441308593750023]), Line([-82.95961914062498, 21.441308593750023] =&gt; [-83.06728515624995, 21.469384765624966]), Line([-83.06728515624995, 21.469384765624966] =&gt; [-83.14150390624998, 21.531884765624994]), Line([-83.14150390624998, 21.531884765624994] =&gt; [-83.1837890625, 21.59345703125004]), Line([-83.1837890625, 21.59345703125004] =&gt; [-83.18022460937497, 21.623046875000025]), Line([-83.18022460937497, 21.623046875000025] =&gt; [-83.11293945312497, 21.573681640624983]), Line([-83.11293945312497, 21.573681640624983] =&gt; [-83.05488281249993, 21.549414062500034]), Line([-83.05488281249993, 21.549414062500034] =&gt; [-83.0072265625, 21.56557617187502]), Line([-83.0072265625, 21.56557617187502] =&gt; [-82.97358398437498, 21.592285156250057]), Line([-82.97358398437498, 21.592285156250057] =&gt; [-83.08251953124997, 21.791406250000023]), Line([-83.08251953124997, 21.791406250000023] =&gt; [-83.07773437499998, 21.83349609375]), Line([-83.07773437499998, 21.83349609375] =&gt; [-82.99121093750003, 21.942724609375034]), Line([-82.99121093750003, 21.942724609375034] =&gt; [-82.75576171875002, 21.90952148437503]), Line([-82.75576171875002, 21.90952148437503] =&gt; [-82.71455078124998, 21.890283203125023]), Line([-82.71455078124998, 21.890283203125023] =&gt; [-82.68183593749995, 21.821142578125063]), Line([-82.68183593749995, 21.821142578125063] =&gt; [-82.62939453125001, 21.766894531250017]), Line([-82.62939453125001, 21.766894531250017] =&gt; [-82.56782226562501, 21.62182617187503]), Line([-82.56782226562501, 21.62182617187503] =&gt; [-82.56176757812503, 21.571679687500023])], GeometryBasics.LineString{2, Float64, GeometryBasics.Point2{Float64}, Base.ReinterpretArray{GeometryBasics.Line{2, Float64}, 1, Tuple{GeometryBasics.Point2{Float64}, GeometryBasics.Point2{Float64}}, GeometryBasics.TupleView{Tuple{GeometryBasics.Point2{Float64}, GeometryBasics.Point2{Float64}}, 2, 1, Vector{GeometryBasics.Point2{Float64}}}, false}}[])
 Polygon{2, Float64, GeometryBasics.Point2{Float64}, GeometryBasics.LineString{2, Float64, GeometryBasics.Point2{Float64}, Base.ReinterpretArray{GeometryBasics.Line{2, Float64}, 1, Tuple{GeometryBasics.Point2{Float64}, GeometryBasics.Point2{Float64}}, GeometryBasics.TupleView{Tuple{GeometryBasics.Point2{Float64}, GeometryBasics.Point2{Float64}}, 2, 1, Vector{GeometryBasics.Point2{Float64}}}, false}}, Vector{GeometryBasics.LineString{2, Float64, GeometryBasics.Point2{Float64}, Base.ReinterpretArray{GeometryBasics.Line{2, Float64}, 1, Tuple{GeometryBasics.Point2{Float64}, GeometryBasics.Point2{Float64}}, GeometryBasics.TupleView{Tuple{GeometryBasics.Point2{Float64}, GeometryBasics.Point2{Float64}}, 2, 1, Vector{GeometryBasics.Point2{Float64}}}, false}}}}(GeometryBasics.Line{2, Float64}[Line([-77.66899414062493, 21.951953125000045] =&gt; [-77.71005859374995, 21.92133789062504]), Line([-77.71005859374995, 21.92133789062504] =&gt; [-77.75502929687497, 21.965576171875]), Line([-77.75502929687497, 21.965576171875] =&gt; [-77.78364257812495, 21.970410156249983]), Line([-77.78364257812495, 21.970410156249983] =&gt; [-77.82319335937501, 21.987939453125023]), Line([-77.82319335937501, 21.987939453125023] =&gt; [-77.9, 22.037158203125014]), Line([-77.9, 22.037158203125014] =&gt; [-77.91855468749998, 22.088085937499983]), Line([-77.91855468749998, 22.088085937499983] =&gt; [-77.85473632812494, 22.091943359374966]), Line([-77.85473632812494, 22.091943359374966] =&gt; [-77.77441406250003, 22.08295898437501]), Line([-77.77441406250003, 22.08295898437501] =&gt; [-77.63369140624994, 22.054003906250074]), Line([-77.63369140624994, 22.054003906250074] =&gt; [-77.64599609374997, 21.996484374999966]), Line([-77.64599609374997, 21.996484374999966] =&gt; [-77.66899414062493, 21.951953125000045])], GeometryBasics.LineString{2, Float64, GeometryBasics.Point2{Float64}, Base.ReinterpretArray{GeometryBasics.Line{2, Float64}, 1, Tuple{GeometryBasics.Point2{Float64}, GeometryBasics.Point2{Float64}}, GeometryBasics.TupleView{Tuple{GeometryBasics.Point2{Float64}, GeometryBasics.Point2{Float64}}, 2, 1, Vector{GeometryBasics.Point2{Float64}}}, false}}[])
 Polygon{2, Float64, GeometryBasics.Point2{Float64}, GeometryBasics.LineString{2, Float64, GeometryBasics.Point2{Float64}, Base.ReinterpretArray{GeometryBasics.Line{2, Float64}, 1, Tuple{GeometryBasics.Point2{Float64}, GeometryBasics.Point2{Float64}}, GeometryBasics.TupleView{Tuple{GeometryBasics.Point2{Float64}, GeometryBasics.Point2{Float64}}, 2, 1, Vector{GeometryBasics.Point2{Float64}}}, false}}, Vector{GeometryBasics.LineString{2, Float64, GeometryBasics.Point2{Float64}, Base.ReinterpretArray{GeometryBasics.Line{2, Float64}, 1, Tuple{GeometryBasics.Point2{Float64}, GeometryBasics.Point2{Float64}}, GeometryBasics.TupleView{Tuple{GeometryBasics.Point2{Float64}, GeometryBasics.Point2{Float64}}, 2, 1, Vector{GeometryBasics.Point2{Float64}}}, false}}}}(GeometryBasics.Line{2, Float64}[Line([-77.87939453125, 22.127539062500034] =&gt; [-77.91235351562497, 22.124707031249983]), Line([-77.91235351562497, 22.124707031249983] =&gt; [-78.01191406249998, 22.16640625000005]), Line([-78.01191406249998, 22.16640625000005] =&gt; [-78.04165039062502, 22.20126953125003]), Line([-78.04165039062502, 22.20126953125003] =&gt; [-78.006689453125, 22.24799804687498]), Line([-78.006689453125, 22.24799804687498] =&gt; [-77.99921874999998, 22.298730468749994]), Line([-77.99921874999998, 22.298730468749994] =&gt; [-77.98564453124996, 22.302099609374977]), Line([-77.98564453124996, 22.302099609374977] =&gt; [-77.96958007812498, 22.240673828124983]), Line([-77.96958007812498, 22.240673828124983] =&gt; [-77.89365234374996, 22.214550781249983]), Line([-77.89365234374996, 22.214550781249983] =&gt; [-77.88911132812491, 22.201074218749994]), Line([-77.88911132812491, 22.201074218749994] =&gt; [-77.84248046874993, 22.148974609375045]), Line([-77.84248046874993, 22.148974609375045] =&gt; [-77.87939453125, 22.127539062500034])], GeometryBasics.LineString{2, Float64, GeometryBasics.Point2{Float64}, Base.ReinterpretArray{GeometryBasics.Line{2, Float64}, 1, Tuple{GeometryBasics.Point2{Float64}, GeometryBasics.Point2{Float64}}, GeometryBasics.TupleView{Tuple{GeometryBasics.Point2{Float64}, GeometryBasics.Point2{Float64}}, 2, 1, Vector{GeometryBasics.Point2{Float64}}}, false}}[])
 Polygon{2, Float64, GeometryBasics.Point2{Float64}, GeometryBasics.LineString{2, Float64, GeometryBasics.Point2{Float64}, Base.ReinterpretArray{GeometryBasics.Line{2, Float64}, 1, Tuple{GeometryBasics.Point2{Float64}, GeometryBasics.Point2{Float64}}, GeometryBasics.TupleView{Tuple{GeometryBasics.Point2{Float64}, GeometryBasics.Point2{Float64}}, 2, 1, Vector{GeometryBasics.Point2{Float64}}}, false}}, Vector{GeometryBasics.LineString{2, Float64, GeometryBasics.Point2{Float64}, Base.ReinterpretArray{GeometryBasics.Line{2, Float64}, 1, Tuple{GeometryBasics.Point2{Float64}, GeometryBasics.Point2{Float64}}, GeometryBasics.TupleView{Tuple{GeometryBasics.Point2{Float64}, GeometryBasics.Point2{Float64}}, 2, 1, Vector{GeometryBasics.Point2{Float64}}}, false}}}}(GeometryBasics.Line{2, Float64}[Line([-78.02709960937497, 22.28515625] =&gt; [-78.04750976562497, 22.268505859374983]), Line([-78.04750976562497, 22.268505859374983] =&gt; [-78.10166015624998, 22.305761718750006]), Line([-78.10166015624998, 22.305761718750006] =&gt; [-78.18002929687495, 22.321972656250036]), Line([-78.18002929687495, 22.321972656250036] =&gt; [-78.22612304687493, 22.379980468750034]), Line([-78.22612304687493, 22.379980468750034] =&gt; [-78.27001953125, 22.40224609375005]), Line([-78.27001953125, 22.40224609375005] =&gt; [-78.27353515625, 22.42358398437503]), Line([-78.27353515625, 22.42358398437503] =&gt; [-78.20097656249996, 22.437646484374962]), Line([-78.20097656249996, 22.437646484374962] =&gt; [-78.15058593750001, 22.43149414062506]), Line([-78.15058593750001, 22.43149414062506] =&gt; [-78.09414062499997, 22.38720703125]), Line([-78.09414062499997, 22.38720703125] =&gt; [-78.061669921875, 22.305908203125057]), Line([-78.061669921875, 22.305908203125057] =&gt; [-78.02709960937497, 22.28515625])], GeometryBasics.LineString{2, Float64, GeometryBasics.Point2{Float64}, Base.ReinterpretArray{GeometryBasics.Line{2, Float64}, 1, Tuple{GeometryBasics.Point2{Float64}, GeometryBasics.Point2{Float64}}, GeometryBasics.TupleView{Tuple{GeometryBasics.Point2{Float64}, GeometryBasics.Point2{Float64}}, 2, 1, Vector{GeometryBasics.Point2{Float64}}}, false}}[])
 Polygon{2, Float64, GeometryBasics.Point2{Float64}, GeometryBasics.LineString{2, Float64, GeometryBasics.Point2{Float64}, Base.ReinterpretArray{GeometryBasics.Line{2, Float64}, 1, Tuple{GeometryBasics.Point2{Float64}, GeometryBasics.Point2{Float64}}, GeometryBasics.TupleView{Tuple{GeometryBasics.Point2{Float64}, GeometryBasics.Point2{Float64}}, 2, 1, Vector{GeometryBasics.Point2{Float64}}}, false}}, Vector{GeometryBasics.LineString{2, Float64, GeometryBasics.Point2{Float64}, Base.ReinterpretArray{GeometryBasics.Line{2, Float64}, 1, Tuple{GeometryBasics.Point2{Float64}, GeometryBasics.Point2{Float64}}, GeometryBasics.TupleView{Tuple{GeometryBasics.Point2{Float64}, GeometryBasics.Point2{Float64}}, 2, 1, Vector{GeometryBasics.Point2{Float64}}}, false}}}}(GeometryBasics.Line{2, Float64}[Line([-78.63012695312499, 22.552246093750057] =&gt; [-78.49287109375001, 22.53105468749999]), Line([-78.49287109375001, 22.53105468749999] =&gt; [-78.4453125, 22.54375]), Line([-78.4453125, 22.54375] =&gt; [-78.39956054687502, 22.547460937500063]), Line([-78.39956054687502, 22.547460937500063] =&gt; [-78.35122070312501, 22.538623046875017]), Line([-78.35122070312501, 22.538623046875017] =&gt; [-78.28388671874998, 22.45546875000005]), Line([-78.28388671874998, 22.45546875000005] =&gt; [-78.34301757812493, 22.445117187500074]), Line([-78.34301757812493, 22.445117187500074] =&gt; [-78.38994140625, 22.445117187500074]), Line([-78.38994140625, 22.445117187500074] =&gt; [-78.42456054687494, 22.460107421875023]), Line([-78.42456054687494, 22.460107421875023] =&gt; [-78.54765624999997, 22.464013671875023]), Line([-78.54765624999997, 22.464013671875023] =&gt; [-78.62900390625003, 22.488183593749966]), Line([-78.62900390625003, 22.488183593749966] =&gt; [-78.67363281249999, 22.50883789062499]), Line([-78.67363281249999, 22.50883789062499] =&gt; [-78.69550781249998, 22.533984375000045]), Line([-78.69550781249998, 22.533984375000045] =&gt; [-78.63012695312499, 22.552246093750057])], GeometryBasics.LineString{2, Float64, GeometryBasics.Point2{Float64}, Base.ReinterpretArray{GeometryBasics.Line{2, Float64}, 1, Tuple{GeometryBasics.Point2{Float64}, GeometryBasics.Point2{Float64}}, GeometryBasics.TupleView{Tuple{GeometryBasics.Point2{Float64}, GeometryBasics.Point2{Float64}}, 2, 1, Vector{GeometryBasics.Point2{Float64}}}, false}}[])
 Polygon{2, Float64, GeometryBasics.Point2{Float64}, GeometryBasics.LineString{2, Float64, GeometryBasics.Point2{Float64}, Base.ReinterpretArray{GeometryBasics.Line{2, Float64}, 1, Tuple{GeometryBasics.Point2{Float64}, GeometryBasics.Point2{Float64}}, GeometryBasics.TupleView{Tuple{GeometryBasics.Point2{Float64}, GeometryBasics.Point2{Float64}}, 2, 1, Vector{GeometryBasics.Point2{Float64}}}, false}}, Vector{GeometryBasics.LineString{2, Float64, GeometryBasics.Point2{Float64}, Base.ReinterpretArray{GeometryBasics.Line{2, Float64}, 1, Tuple{GeometryBasics.Point2{Float64}, GeometryBasics.Point2{Float64}}, GeometryBasics.TupleView{Tuple{GeometryBasics.Point2{Float64}, GeometryBasics.Point2{Float64}}, 2, 1, Vector{GeometryBasics.Point2{Float64}}}, false}}}}(GeometryBasics.Line{2, Float64}[Line([-79.34956054687493, 22.663916015625063] =&gt; [-79.34790039062493, 22.637695312500057]), Line([-79.34790039062493, 22.637695312500057] =&gt; [-79.52275390624995, 22.711132812500008]), Line([-79.52275390624995, 22.711132812500008] =&gt; [-79.59785156249998, 22.787646484375045]), Line([-79.59785156249998, 22.787646484375045] =&gt; [-79.62817382812501, 22.80522460937507]), Line([-79.62817382812501, 22.80522460937507] =&gt; [-79.57915039062499, 22.806738281250034]), Line([-79.57915039062499, 22.806738281250034] =&gt; [-79.382177734375, 22.681347656249983]), Line([-79.382177734375, 22.681347656249983] =&gt; [-79.34956054687493, 22.663916015625063])], GeometryBasics.LineString{2, Float64, GeometryBasics.Point2{Float64}, Base.ReinterpretArray{GeometryBasics.Line{2, Float64}, 1, Tuple{GeometryBasics.Point2{Float64}, GeometryBasics.Point2{Float64}}, GeometryBasics.TupleView{Tuple{GeometryBasics.Point2{Float64}, GeometryBasics.Point2{Float64}}, 2, 1, Vector{GeometryBasics.Point2{Float64}}}, false}}[])
 Polygon{2, Float64, GeometryBasics.Point2{Float64}, GeometryBasics.LineString{2, Float64, GeometryBasics.Point2{Float64}, Base.ReinterpretArray{GeometryBasics.Line{2, Float64}, 1, Tuple{GeometryBasics.Point2{Float64}, GeometryBasics.Point2{Float64}}, GeometryBasics.TupleView{Tuple{GeometryBasics.Point2{Float64}, GeometryBasics.Point2{Float64}}, 2, 1, Vector{GeometryBasics.Point2{Float64}}}, false}}, Vector{GeometryBasics.LineString{2, Float64, GeometryBasics.Point2{Float64}, Base.ReinterpretArray{GeometryBasics.Line{2, Float64}, 1, Tuple{GeometryBasics.Point2{Float64}, GeometryBasics.Point2{Float64}}, GeometryBasics.TupleView{Tuple{GeometryBasics.Point2{Float64}, GeometryBasics.Point2{Float64}}, 2, 1, Vector{GeometryBasics.Point2{Float64}}}, false}}}}(GeometryBasics.Line{2, Float64}[Line([-81.83745117187499, 23.16303710937495] =&gt; [-81.57543945312497, 23.11650390625007]), Line([-81.57543945312497, 23.11650390625007] =&gt; [-81.36362304687499, 23.129687500000017]), Line([-81.36362304687499, 23.129687500000017] =&gt; [-81.26235351562497, 23.156835937500034]), Line([-81.26235351562497, 23.156835937500034] =&gt; [-81.271630859375, 23.128613281249955]), Line([-81.271630859375, 23.128613281249955] =&gt; [-81.17861328124997, 23.059667968750034]), Line([-81.17861328124997, 23.059667968750034] =&gt; [-81.14462890624998, 23.054931640625053]), Line([-81.14462890624998, 23.054931640625053] =&gt; [-81.00766601562495, 23.089843749999968]), Line([-81.00766601562495, 23.089843749999968] =&gt; [-80.65014648437493, 23.10307617187499]), Line([-80.65014648437493, 23.10307617187499] =&gt; [-80.61342773437502, 23.08374023437497]), Line([-80.61342773437502, 23.08374023437497] =&gt; [-80.55048828124998, 23.01660156249997])  …  Line([-84.36127929687498, 22.37890625] =&gt; [-84.28134765624993, 22.474218750000063]), Line([-84.28134765624993, 22.474218750000063] =&gt; [-84.12177734374995, 22.618554687499962]), Line([-84.12177734374995, 22.618554687499962] =&gt; [-84.04492187500003, 22.666015625000057]), Line([-84.04492187500003, 22.666015625000057] =&gt; [-83.25781249999997, 22.967578125000017]), Line([-83.25781249999997, 22.967578125000017] =&gt; [-83.17724609375, 22.983007812500063]), Line([-83.17724609375, 22.983007812500063] =&gt; [-82.66582031249997, 23.043554687500034]), Line([-82.66582031249997, 23.043554687500034] =&gt; [-82.58779296875, 23.064550781250063]), Line([-82.58779296875, 23.064550781250063] =&gt; [-82.35053710937498, 23.153955078124962]), Line([-82.35053710937498, 23.153955078124962] =&gt; [-82.10136718750002, 23.190429687500025]), Line([-82.10136718750002, 23.190429687500025] =&gt; [-81.83745117187499, 23.16303710937495])], GeometryBasics.LineString{2, Float64, GeometryBasics.Point2{Float64}, Base.ReinterpretArray{GeometryBasics.Line{2, Float64}, 1, Tuple{GeometryBasics.Point2{Float64}, GeometryBasics.Point2{Float64}}, GeometryBasics.TupleView{Tuple{GeometryBasics.Point2{Float64}, GeometryBasics.Point2{Float64}}, 2, 1, Vector{GeometryBasics.Point2{Float64}}}, false}}[])</code></pre><p>This object is actually a multi-polygon, or an array of polygons. The <code>mask</code> function can handle this:</p><pre><code class="language- hljs">plot(layer, c=:lightgrey, frame=:box)
plot!(mask(CUBA, layer), c=:turku)
scatter!(la_habana, lab=&quot;&quot;, c=:white, msw=2.0)</code></pre><p>The delimitation of the area to crop is only as good as the underlying GeoJSON polygons, which in this case is missing some coastal areas. As a sidenote, the <em>center</em> of the grid cell is checked for being in the polygon (not <em>any</em> coordinate within the grid cell) - for this reason, coarser rasters (<em>e.g.</em> at 10 minutes resolution) may not respond perfectly well to masking in this way.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../elevation/">« Introduction: elevation data</a><a class="docs-footer-nextpage" href="../slidingwindow/">Sliding window analysis »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.8 on <span class="colophon-date" title="Friday 15 October 2021 17:45">Friday 15 October 2021</span>. Using Julia version 1.6.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
